<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/png" href="assets/img/favicon.ico">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>ProTracker</title>

		<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	      <meta name="viewport" content="width=device-width" />

	      <!-- Bootstrap core CSS     -->
	      <link href="assets/css/bootstrap.min.css" rel="stylesheet" />

	      <!-- Animation library for notifications   -->
	      <link href="assets/css/animate.min.css" rel="stylesheet"/>

		<!--  Light Bootstrap Table core CSS    -->
	      <link href="assets/css/light-bootstrap-dashboard.css?v=1.4.0" rel="stylesheet"/>

	      <!--     Fonts and icons     -->
		<link href="../assets/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet">
	      <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
	      <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />
	</head>
	<body>

		<div class="wrapper">
	      <div class="sidebar" data-color="purple" data-image="assets/img/sidebar-5.jpg">

	    	      <div class="sidebar-wrapper">
	            <div class="logo">
	                  <a href=# class="simple-text">
	                    ProTracker
	                  </a>
	           </div>

	           <ul class="nav">
	               <li class="active">
	                    <a href="#">
	                       <i class="pe-7s-graph"></i>
	                       <p>Dashboard</p>
	                   </a>
	                </li>
	                <li>
	                    <a href="/employee/eproject.html">
	                        <i class="pe-7s-edit"></i>
	                        <p>Manage Your Projects</p>
	                   </a>
	                </li>
	       	    <li>
	                      <a href="/employee/etask.html">
	                          <i class="pe-7s-edit"></i>
	                          <p>Manage Your Tasks</p>
	                       </a>
	                 </li>
	                  <li>
	                        <a href="/employee/empgantt.html">
	                      		<i class="pe-7s-graph3"></i>
	              			<p>Gantt Chart</p>
	            		</a>
	          		</li>
	        	</ul>
	    	</div>
	      </div>

	      <div class="main-panel">
	      	<nav class="navbar navbar-default navbar-fixed">
	        		<div class="container-fluid">
	          			<div class="navbar-header">
	            			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
	              				<span class="sr-only">Toggle navigation</span>
	              				<span class="icon-bar"></span>
	              				<span class="icon-bar"></span>
	              				<span class="icon-bar"></span>
	            			</button>
	            			<a class="navbar-brand" href="#">Employee's Dashboard</a>
	          			</div>
	          			<div class="collapse navbar-collapse">
	            			<ul class="nav navbar-nav navbar-left">
	              				<li class="dropdown">
	              					<a href="#" class="dropdown-toggle" data-toggle="dropdown">
	              						<i class="fa fa-globe"></i>
	                						<b class="caret hidden-lg hidden-md"></b>
									<p class="hidden-lg hidden-md">
											5 Notifications
										<b class="caret"></b>
									</p>
	              					</a>
	            					<ul class="dropdown-menu">
	              						<li><a href="#">Notification 1</a></li>
	              						<li><a href="#">Notification 2</a></li>
	              						<li><a href="#">Notification 3</a></li>
	              						<li><a href="#">Notification 4</a></li>
	              						<li><a href="#">Another notification</a></li>
	            					</ul>
	              				</li>
	            			</ul>
	            			<ul class="nav navbar-nav navbar-right">
	                        		<!-- <li>
	                           			<a href="">
	                               			<p>Account</p>
	                            			</a>
	                        		</li> -->
	                        		<!-- <li class="dropdown">
	                              		<a href="#" class="dropdown-toggle" data-toggle="dropdown">
	                                    		<p>
										Dropdown
										<b class="caret"></b>
									</p>
	                              		</a>
	                        		</li> -->
	              				<li>
	                					<a href="index.html" onclick= "logout()">
	                  					<p>Log out</p>
								</a>
	             				</li>
							<li class="separator hidden-lg"></li>
	          				</ul>
	        			</div>
	      		</div>
	    		</nav>

	    		<div class="content">
	      		<div class="container-fluid">
	                		<!-- <div class="row">
	                    			<div class="col-md-4">
	                        			<div class="card">
	                            				<div class="header">
	                                				<h4 class="title">Email Statistics</h4>
	                                				<p class="category">Last Campaign Performance</p>
	                            				</div>
		                            			<div class="content">
		                                			<div id="chartPreferences" class="ct-chart ct-perfect-fourth">
										</div>
		                                			<div class="footer">
		                                    			<div class="legend">
		                                        				<i class="fa fa-circle text-info"></i> Open
		                                        				<i class="fa fa-circle text-danger"></i> Bounce
		                                        				<i class="fa fa-circle text-warning"></i> Unsubscribe
		                                    			</div>
		                                    			<hr>
		                                    			<div class="stats">
		                                        				<i class="fa fa-clock-o"></i> Campaign sent 2 days ago
		                                    			</div>
		                                			</div>
		                            			</div>
	                        			</div>
	                    			</div>

	                    			<div class="col-md-8">
	                        			<div class="card">
	                            				<div class="header">
	                                				<h4 class="title">Users Behavior</h4>
	                                				<p class="category">24 Hours performance</p>
	                            				</div>
	                            				<div class="content">
		                                			<div id="chartHours" class="ct-chart"></div>
		                                			<div class="footer">
			                                    		<div class="legend">
			                                        			<i class="fa fa-circle text-info"></i> Open
			                                        			<i class="fa fa-circle text-danger"></i> Click
			                                        			<i class="fa fa-circle text-warning"></i> Click Second Time
			                                    		</div>
			                                    		<hr>
			                                    		<div class="stats">
		                                        				<i class="fa fa-history"></i> Updated 3 minutes ago
		                                    			</div>
		                                			</div>
	                            				</div>
	                        			</div>
	                    			</div>
	                			</div> -->

			    		<div class="row">
				    		<div class="col-md-8">
	      			    		<div class="card">
	            		    			<div class="header">
	            		    				<h4 class="title">Projects Assigned To You</h4>
	            		    			</div>
	            					<div class="content">
	            						<table class="table table-striped table-dark">
	            							<thead>
	            								<th>Project Name</th>
	            								<th>Status</th>
	            								<th>Posted Date</th>
	            							</thead>
	            							<tbody id="projectTable">
	            							</tbody>
	            						</table>
	            					</div>
	            		    		</div>
	      		    		</div>
			    		</div>

					<div id="piechart_3d" style="width: 900px; height: 500px;"></div>
	                <!-- <div class="row">
	                    <div class="col-md-6">
	                        <div class="card ">
	                            <div class="header">
	                                <h4 class="title">2014 Sales</h4>
	                                <p class="category">All products including Taxes</p>
	                            </div>
	                            <div class="content">
	                                <div id="chartActivity" class="ct-chart"></div>

	                                <div class="footer">
	                                    <div class="legend">
	                                        <i class="fa fa-circle text-info"></i> Tesla Model S
	                                        <i class="fa fa-circle text-danger"></i> BMW 5 Series
	                                    </div>
	                                    <hr>
	                                    <div class="stats">
	                                        <i class="fa fa-check"></i> Data information certified
	                                    </div>
	                                </div>
	                            </div>
	                        </div>
	                    </div>

	                    <div class="col-md-6">
	                        <div class="card ">
	                            <div class="header">
	                                <h4 class="title">Tasks</h4>
	                                <p class="category">Backend development</p>
	                            </div>
	                            <div class="content">
	                                <div class="table-full-width">
	                                    <table class="table">
	                                        <tbody>
	                                            <tr>
	                                                <td>
														<div class="checkbox">
							  							  	<input id="checkbox1" type="checkbox">
							  							  	<label for="checkbox1"></label>
						  						  		</div>
	                                                </td>
	                                                <td>Sign contract for "What are conference organizers afraid of?"</td>
	                                                <td class="td-actions text-right">
	                                                    <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
	                                                        <i class="fa fa-edit"></i>
	                                                    </button>
	                                                    <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
	                                                        <i class="fa fa-times"></i>
	                                                    </button>
	                                                </td>
	                                            </tr>
	                                            <tr>
	                                                <td>
														<div class="checkbox">
							  							  	<input id="checkbox2" type="checkbox" checked>
							  							  	<label for="checkbox2"></label>
						  						  		</div>
	                                                </td>
	                                                <td>Lines From Great Russian Literature? Or E-mails From My Boss?</td>
	                                                <td class="td-actions text-right">
	                                                    <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
	                                                        <i class="fa fa-edit"></i>
	                                                    </button>
	                                                    <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
	                                                        <i class="fa fa-times"></i>
	                                                    </button>
	                                                </td>
	                                            </tr>
	                                            <tr>
	                                                <td>
														<div class="checkbox">
							  							  	<input id="checkbox3" type="checkbox">
							  							  	<label for="checkbox3"></label>
						  						  		</div>
	                                                </td>
	                                                <td>Flooded: One year later, assessing what was lost and what was found when a ravaging rain swept through metro Detroit
													</td>
	                                                <td class="td-actions text-right">
	                                                    <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
	                                                        <i class="fa fa-edit"></i>
	                                                    </button>
	                                                    <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
	                                                        <i class="fa fa-times"></i>
	                                                    </button>
	                                                </td>
	                                            </tr>
	                                            <tr>
	                                                <td>
														<div class="checkbox">
							  							  	<input id="checkbox4" type="checkbox" checked>
							  							  	<label for="checkbox4"></label>
						  						  		</div>
	                                                </td>
	                                                <td>Create 4 Invisible User Experiences you Never Knew About</td>
	                                                <td class="td-actions text-right">
	                                                    <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
	                                                        <i class="fa fa-edit"></i>
	                                                    </button>
	                                                    <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
	                                                        <i class="fa fa-times"></i>
	                                                    </button>
	                                                </td>
	                                            </tr>
	                                            <tr>
	                                                <td>
														<div class="checkbox">
							  							  	<input id="checkbox5" type="checkbox">
							  							  	<label for="checkbox5"></label>
						  						  		</div>
	                                                </td>
	                                                <td>Read "Following makes Medium better"</td>
	                                                <td class="td-actions text-right">
	                                                    <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
	                                                        <i class="fa fa-edit"></i>
	                                                    </button>
	                                                    <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
	                                                        <i class="fa fa-times"></i>
	                                                    </button>
	                                                </td>
	                                            </tr>
	                                            <tr>
	                                                <td>
														<div class="checkbox">
							  							  	<input id="checkbox6" type="checkbox" checked>
							  							  	<label for="checkbox6"></label>
						  						  		</div>
	                                                </td>
	                                                <td>Unfollow 5 enemies from twitter</td>
	                                                <td class="td-actions text-right">
	                                                    <button type="button" rel="tooltip" title="Edit Task" class="btn btn-info btn-simple btn-xs">
	                                                        <i class="fa fa-edit"></i>
	                                                    </button>
	                                                    <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
	                                                        <i class="fa fa-times"></i>
	                                                    </button>
	                                                </td>
	                                            </tr>
	                                        </tbody>
	                                    </table>
	                                </div>

	                                <div class="footer">
	                                    <hr>
	                                    <div class="stats">
	                                        <i class="fa fa-history"></i> Updated 3 minutes ago
	                                    </div>
	                                </div>
	                            </div>
	                        </div>
	                  </div>-->
	            </div>

	      			</div>
	    			</div>


	    			<footer class="footer">
	    			</footer>

	  		</div>
		</div>
	</body>

	  	<!--   Core JS Files   -->
	  	<script src="assets/js/jquery.3.2.1.min.js" type="text/javascript"></script>
		<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>

		<!--  Charts Plugin -->
		<!-- <script src="assets/js/chartist.min.js"></script> -->

	  	<!--  Notifications Plugin    -->
	  	<script src="assets/js/bootstrap-notify.js"></script>

		<script src="assets/js/light-bootstrap-dashboard.js?v=1.4.0"></script>

		<!-- <script src="assets/js/demo.js"></script> -->
		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.11/lodash.js"></script>

		<script type="text/javascript">
	    		$(document).ready(function(){
	      		demo.initChartist();

	      		$.notify({
	        			icon: 'pe-7s-gift',
	        			message: "Welcome to <b>ProTracker</b> -A Simplified Project Tracker Web-App."
	            	},{
	                		type: 'info',
	                		timer: 4000
	            	});
	    		});

			function logout(){
				localStorage.removeItem('loggedUserId');
			}

	      	google.charts.load("current", {packages:["corechart"]});
	      	google.charts.setOnLoadCallback(drawChart);
	      	function drawChart() {
				var projectCount = _.countBy(_.map(JSON.parse(localStorage.getItem("projects")), project => project.assignedTo))
				var piedata = _.concat([['Task', 'No of projects']] ,_.zip(_.keys(projectCount), _.values(projectCount)))
	        		var data = google.visualization.arrayToDataTable(piedata);
	        		var options = {
	          			title: 'Number of Projects Assigned',
	          			is3D: true,
	        		};
	        		var chart = new google.visualization.PieChart(document.getElementById('piechart_3d'));
	        		chart.draw(data, options);
	      	}

			var loggedUserId = localStorage.getItem('loggedUserId');
			var users = JSON.parse(localStorage.getItem("users")) ;
			var projectTable ='';
			for (var i = 0; i < users.length; i++) {
		      	if (users[i].id == loggedUserId) {
		            	var user = users[i].name;
		      	}
			}
			var projects = JSON.parse(localStorage.getItem("projects"));
			for (var i = 0; i < projects.length; i++) {
				if (projects[i].assignedTo == user) {
					projectTable +="<tr>";
					projectTable +="<td>"+projects[i].name+"</td>";
					projectTable +="<td>"+projects[i].status+"</td>";
					projectTable +="<td>"+projects[i].pdate+"</td></tr>";
				}
				else {
					projectTable="<div class='alert alert-danger' role='alert''><strong>Oh snap..!</strong> No Projects Are Assigned To You</div>";
				}
			}
			document.getElementById('projectTable').innerHTML = projectTable;

    </script>
</html>
